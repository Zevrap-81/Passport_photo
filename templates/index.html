{% extends "main.html" %}
{% block title %}Home - Passport Photo{% endblock %}

{% block content %} 
    <div id="main-app" class="container">
    <div class="jumbotron text-center">
    <div class="row justify-content-center">
      <div class="col-md-6">
      <h1 class="mt-5"></h1>
      {% if upload %}
      <div class="card">
        <div class="card-header">
          Upload an Image
        </div>
        <div class="card-body">
          <form action="/upload/" method="post" enctype="multipart/form-data">
            <input type="file" name="file" accept=".jpg, .jpeg, .png" required>
            <input type="submit" value="Upload">
          </form>
        </div>
      </div>
      {% endif %}

      {% if filename %}
      <div class="card">
        <div class="card-header">
          Uploaded Image
        </div>
        <div class="card-body">
          <img src="/static/uploads/{{ filename }}" alt="Uploaded Image" id="processedImage">
          <div class="card-footer text-center">
            <a href="/process/{{filename}}">
              <button type="button" class="btn btn-primary">Process</button>
            </a>
          </div>
        </div>
      </div>
      {% endif %}

      {% if processed_image %}
      <div class="card">
        <div class="card-header">
          Passport Image
        </div>
        <div class="card-body">
          <img src="/static/downloads/{{ processed_image }}" alt="Passport Image" id="processedImage">
          <p class="card-text">Thank you for using Passport Photo Maker!</p>
          <p>Please click the button below to download the processed image:</p>
          
          <div class="card-footer text-center">
            <a href="/download/{{processed_image}}">
              <button type="button" class="btn btn-outline-primary">Download</button>
            </a>
          </div>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</div>
</div>

<script>
  // Get the photo element
  const photo = document.getElementById('processedImage');
  
  // Get the card element
  const card = document.querySelector('.card');
  
  // Set the width of the photo to match the card width
  const cardWidth = card.offsetWidth;
  const photoWidth = cardWidth - 40; // Adjust the pixel value as needed
  photo.style.width = photoWidth + 'px';
</script>

    {% endblock %}
